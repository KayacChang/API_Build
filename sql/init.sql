CREATE TABLE IF NOT EXISTS admins ( admin_id CHAR(32) PRIMARY KEY, email VARCHAR(256) NOT NULL UNIQUE, username VARCHAR(256), password VARCHAR(256) NOT NULL, created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(), updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW() ); CREATE TABLE IF NOT EXISTS games ( game_id CHAR(32) PRIMARY KEY, name VARCHAR(256) NOT NULL UNIQUE, href VARCHAR NOT NULL UNIQUE, category VARCHAR(32) NOT NULL, created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(), updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW() ); CREATE TABLE IF NOT EXISTS users ( user_id CHAR(32) PRIMARY KEY, username VARCHAR(256) NOT NULL UNIQUE, balance NUMERIC NOT NULL, created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(), updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW() ); CREATE TABLE IF NOT EXISTS orders ( order_id CHAR(36) PRIMARY KEY, state CHAR(1) NOT NULL DEFAULT 'P', bet NUMERIC NOT NULL DEFAULT 0, win NUMERIC NOT NULL DEFAULT 0, game_id CHAR(32) NOT NULL REFERENCES games, user_id CHAR(32) NOT NULL REFERENCES users, created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(), updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(), completed_at TIMESTAMPTZ ); CREATE TABLE IF NOT EXISTS sub_orders ( sub_order_id CHAR(36) PRIMARY KEY, state CHAR(1) NOT NULL DEFAULT 'P', bet NUMERIC NOT NULL DEFAULT 0, order_id CHAR(36) NOT NULL REFERENCES orders, created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(), updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW() );
